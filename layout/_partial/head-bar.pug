-
  let menu = Object.keys(config.menu)
    .map((key) => [key, config.menu[key]])
    .sort((at, bt) => {
      let a = at[1], b = bt[1];

      // Others == Others > Archives > Tags
      if (a.widget === "Archives")
        return (b.widget === "Tags") ? -1 : 1;
      else if (a.widget === "Tags")
        return 1;
      else {
        if (b.widget === "Archives" || b.widget === "Tags")
          return -1;
        else
          return 0;
      }
    });

-
  function itemURL(item) {
    if (item.widget === "Archives") return url_for('/' + config.archive_dir);
    else if (item.widget === "Tags") return url_for('/' + config.tag_dir);
    else return url_for(`/${config.category_dir}/${item.name}/`);
  }

-
  function itemIcon(item) {
    if (item.widget === "Archives") return "icon-archive";
    else if (item.widget === "Tags") return "icon-tags";
    else return "icon-chevron-right";
  }

#menu-bar.menu-bar-head
  ul.menu-bar-ul
    - for (const [name, item] of menu)
      if item.widget === "Archives"
        li.menu-bar-item(data-border)

      li.menu-bar-item
        i.icon(class= itemIcon(item))
        |
        |
        a.menu-bar-link(href= itemURL(item))= name

    - const header_menu = config.header_menu;
    if header_menu
      li.menu-bar-item(data-border)

      - for (const item in header_menu)
        li.menu-bar-item
          a.menu-bar-link(href= url_for(header_menu[item]))
            span= item

  if config.search
    div.menu-search-box.search-button
      div= __('nav.search')
      |
      |
      i.icon.icon-search
